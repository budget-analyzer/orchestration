# PostgreSQL Configuration for Budget Analyzer
# Matches docker-compose.yml settings for parity

auth:
  username: budget_analyzer
  password: budget_analyzer
  database: postgres

# Primary server configuration
primary:
  persistence:
    enabled: true
    size: 1Gi

  # Initialize multiple databases for microservices
  initdb:
    scripts:
      01-init-databases.sql: |
        -- Create separate databases for each microservice
        CREATE DATABASE budget_analyzer;
        GRANT ALL PRIVILEGES ON DATABASE budget_analyzer TO budget_analyzer;

        CREATE DATABASE currency;
        GRANT ALL PRIVILEGES ON DATABASE currency TO budget_analyzer;

        CREATE DATABASE permission;
        GRANT ALL PRIVILEGES ON DATABASE permission TO budget_analyzer;

  resources:
    requests:
      memory: 256Mi
      cpu: 100m
    limits:
      memory: 512Mi
      cpu: 500m

# Disable replication for local development
architecture: standalone

# Service configuration
service:
  type: ClusterIP
  ports:
    postgresql: 5432

# Metrics (disabled for local dev to save resources)
metrics:
  enabled: false
